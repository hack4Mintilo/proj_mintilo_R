getwd()
require(rvest)
url <- "https://en.wikipedia.org/wiki/List_of_Ethiopian_records_in_athletics"
records_athletics <- read_html(url)
records_athletics_tbl <- records_athletics%>%html_nodes(rpath='//*[@id="mw-content-text"]/table[1]')%>%html_table()
records_athletics_tbl <- records_athletics%>%html_nodes(xpath='//*[@id="mw-content-text"]/table[1]')%>%html_table()
records_athletics_tbl <- records_athletics%>%html_nodes(xpath='//*[@id="mw-content-text"]/table[1]')%>%html_table(fill = TRUE)
records_athletics_tbl
records_athletics_tbl[[1]]
class(records_athletics_tbl)
as.data.frame(records_athletics_tbl)
records_athletics_wikidia <- records_athletics%>%html_nodes(xpath='//*[@id="mw-content-text"]/table[1]')%>%html_table(fill = TRUE)
records_athletics_tbl <- as.data.frame(unlist(records_athletics_wikidia))
class(records_athletics_tbl)
head(records_athletics_tbl)
records_athletics_tbl <- as.data.frame(unlist(records_athletics_wikidia[[1]]))
head(records_athletics_tbl)
records_athletics_tbl <- as.data.frame(records_athletics_wikidia[[1]])
head(records_athletics_tbl)
records_athletics_bib <- records_athletics%>%html_nodes(xpath='//*[@id="toc"]/ul/li[3]/a')%>%html_attr("href")
records_athletics_bib
records_athletics_bib <- records_athletics%>%html_nodes(xpath='//*[@id="toc"]/ul/li[3]/a')%>%html_text()
records_athletics_bib
records_athletics_bib <- records_athletics%>%html_nodes(xpath='//*[@id="mw-content-text"]/div[2]')%>%html_text()
records_athletics_bib
tbl=1
rpath_tbl <- paste("'", "//*[@id=\"mw-content-text\"]/table", "[", tbl, "]", "'")
rpath_tbl
rpath_tbl <- paste("'", "//*[@id=\"mw-content-text\"]/table", "[", tbl, "]", "'",
sep = "")
rpath_tbl
rpath_tbl <- paste("'", "//*[@id=\"mw-content-text\"]/table", "[", tbl, "]", "'",
sep = "")
rpath_tbl
rpath_tbl <- cat(paste("'", "//*[@id=\"mw-content-text\"]/table", "[", tbl, "]", "'", sep = ""))
rpath_tbl
tbl_xpath <- paste("'", "//*[@id=\"mw-content-text\"]/table", "[", tbl, "]", "'", sep = "\\")
tbl
tbl_xpath
tbl_xpath <- paste("'", "//*[@id=\"mw-content-text\"]/table", "[", tbl, "]", "'", sep = bslash)
shQuote(mw-content-text)
shQuote("mw-content-text")
tbl_xpath <- paste("'", "//*[@id=", shQuote("mw-content-text"), "]/table[", tbl, "]",
sep = "")
tbl_xpath
tbl_xpath <- paste("'", "//*[@id=", shQuote("mw-content-text"), "]/table[", tbl, "]'",
sep = "")
tbl_xpath
records_athletics_tbl <- records_athletics%>%html_nodes(xpath=tbl_xpath)%>%html_table(fill = TRUE)
tbl_xpath
shQuote("mw-content-text", string = 2)
shQuote("mw-content-text", type = "sh")
shQuote("mw-content-text", type = "csh")
shQuote("mw-content-text", type = "cmd")
tbl_xpath <- paste("'", "//*[@id=", "\"mw-content-text\"", "]/table[", tbl, "]'",
sep = "")
tbl_xpath
cat(tbl_xpath)
records_athletics_tbl <- records_athletics%>%html_nodes(xpath=tbl_xpath)%>%html_table(fill = TRUE)
tbl_xpath <- paste("//*[@id=", "\"mw-content-text\"", "]/table[", tbl, "]",
sep = "")
cat(tbl_xpath)
records_athletics_tbl <- records_athletics%>%html_nodes(xpath='tbl_xpath')%>%html_table(fill = TRUE)
records_athletics_wiki <- records_athletics%>%html_nodes(xpath='tbl_xpath')%>%html_table(fill = TRUE)
records_athletics_wiki
records_athletics_outdoorM <- records_athletics%>%html_nodes(xpath='//*[@id="mw-content-text"]/table[1]')%>%html_table(fill = TRUE)
records_athletics_outdoorF <- records_athletics%>%html_nodes(xpath='//*[@id="mw-content-text"]/table[2]')%>%html_table(fill = TRUE)
records_athletics_indoorM <- records_athletics%>%html_nodes(xpath='//*[@id="mw-content-text"]/table[3]')%>%html_table(fill = TRUE)
records_athletics_indoorF <- records_athletics%>%html_nodes(xpath='//*[@id="mw-content-text"]/table[4]')%>%html_table(fill = TRUE)
records_athletics_outdoorM <- as.data.frame(records_athletics%>%html_nodes(xpath='//*[@id="mw-content-text"]/table[1]')%>%html_table(fill = TRUE))
head(records_athletics_outdoorM)
records_athletics_outdoorM <- as.data.frame(records_athletics%>%html_nodes(xpath='//*[@id="mw-content-text"]/table[1]')%>%html_table(fill = TRUE))
records_athletics_outdoorF <- as.data.frame(records_athletics%>%html_nodes(xpath='//*[@id="mw-content-text"]/table[2]')%>%html_table(fill = TRUE))
records_athletics_indoorM <- as.data.frame(records_athletics%>%html_nodes(xpath='//*[@id="mw-content-text"]/table[3]')%>%html_table(fill = TRUE))
records_athletics_indoorF <- as.data.frame(records_athletics%>%html_nodes(xpath='//*[@id="mw-content-text"]/table[4]')%>%html_table(fill = TRUE))
head(records_athletics_outdoorM)
head(records_athletics_outdoorF)
head(records_athletics_indoorM)
records_athletics_outdoorM$comp_doorInOut <- "outdoor"; records_athletics_outdoorF$comp_doorInOut <- "outdoor"
records_athletics_indoorM$comp_doorInOut <- "indoor"; records_athletics_indoorF$comp_doorInOut <- "indoor"
records_athletics_outdoorM$sex <- "m"; records_athletics_outdoorF$sex <- "f"
records_athletics_indoorM$sex <- "m"; records_athletics_indoorF$sex <- "f"
head(records_athletics_outdoorM)
head(records_athletics_outdoorF)
head(records_athletics_indoorM)
head(records_athletics_indoorF)
records_athletics_table <- data.frame(records_athletics_outdoorM, records_athletics_outdoorF,
records_athletics_indoorM, records_athletics_indoorF)
records_athletics_table <- as.data.frame(rbind(records_athletics_outdoorM, records_athletics_outdoorF,
records_athletics_indoorM, records_athletics_indoorF))
dim(records_athletics_outdoorM)
dim(records_athletics_outdoorF)
dim(records_athletics_indoorM)
dim(records_athletics_indoorF)
names(records_athletics_outdoorM)
names(records_athletics_outdoorF)
names(records_athletics_indoorM)
names(records_athletics_indoorF)
records_athletics_outdoorM <- records_athletics_outdoorM[, -c("Video")]
records_athletics_outdoorM <- records_athletics_outdoorM[, -"Video"]
records_athletics_outdoorM <- records_athletics_outdoorM[, -8]
names(records_athletics_outdoorM)
records_athletics_table <- as.data.frame(rbind(records_athletics_outdoorM, records_athletics_outdoorF,
records_athletics_indoorM, records_athletics_indoorF))
dim(records_athletics_table)
head(records_athletics_table)
records_athletics_table$Event <- as.numeric(records_athletics_table$Event)
count(is.na(records_athletics_table$Event))
sum(is.na(records_athletics_table$Event))
dim(records_athletics_table)
records_athletics_table
records_athletics_table
records_athletics_table <- as.data.frame(rbind(records_athletics_outdoorM, records_athletics_outdoorF,
records_athletics_indoorM, records_athletics_indoorF))
head(records_athletics_table)
class(records_athletics_table$Event)
sum(is.null(records_athletics_table$Event))
records_athletics_table
?merge
records_athletics_table <- merge(records_athletics_outdoorM, records_athletics_outdoorF,
records_athletics_indoorM, records_athletics_indoorF,
all = TRUE)
require(plyr)
records_athletics_table <- as.data.frame(rbind.fill(records_athletics_outdoorM, records_athletics_outdoorF,
records_athletics_indoorM, records_athletics_indoorF))
head(records_athletics_table)
tail(records_athletics_table)
edit(records_athletics_outdoorM)
write.xlsx(x = records_athletics_outdoorM, file = "./records_athletics_outdoorM.xlsx", sheetName = "records_athletics_outdoorM",
row.names = FALSE, col.names = TRUE)
require(xlsx)
write.xlsx(x = records_athletics_outdoorM, file = "./records_athletics_outdoorM.xlsx", sheetName = "records_athletics_outdoorM",
row.names = FALSE, col.names = TRUE)
write.xlsx(x = records_athletics_outdoorF, file = "./records_athletics_outdoorF.xlsx", sheetName = "records_athletics_outdoorF",
row.names = FALSE, col.names = TRUE)
write.xlsx(x = records_athletics_indoorM, file = "./records_athletics_indoorM.xlsx", sheetName = "records_athletics_indoorM",
row.names = FALSE, col.names = TRUE)
write.xlsx(x = records_athletics_indoorF, file = "./records_athletics_indoorF.xlsx", sheetName = "records_athletics_indoorF",
row.names = FALSE, col.names = TRUE)
write.xlsx(x = records_athletics_table, file = "./records_athletics_table.xlsx", sheetName = "records_athletics_table",
row.names = FALSE, col.names = TRUE)
